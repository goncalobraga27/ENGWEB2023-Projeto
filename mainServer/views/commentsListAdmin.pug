extends layout

block append head
    title Comentários

block content
    .w3-card-4
        header.w3-container.w3-blue-gray
            .w3-bar.w3-border-bottom
                .w3-bar-item
                    h3 #[b Inquirição de Génere - Trabalho Prático de EngWeb2023]
                a.w3-bar-item.w3-button(href="/home" style="position:relative; top:5px;")
                    .w3-cell-row
                        .w3-cell
                            i.fa.fa-solid.fa-house(style="color: #000000;")
                        .w3-cell(style="width:80%")
                            h6 #[b Início]
                a.w3-bar-item.w3-button(href="/retrieveAll" style="position:relative; top:5px;")
                    .w3-cell-row
                        .w3-cell
                            i.fa.fa-solid.fa-folder-open(style="color: #000000;")
                        .w3-cell(style="width:84%")
                            h6 #[b Registos]
                if type == "Admin"
                    a.w3-bar-item.w3-button(href="/processos/registo" style="position:relative; top:5px;")
                        .w3-cell-row
                            .w3-cell
                                i.fa.fa-solid.fa-file-circle-plus(style="color: #000000;")
                            .w3-cell(style="width:84%")
                                h6 &nbsp; #[b Adicionar Registo]
                input.w3-bar-item.w3-input.w3-border(type="text" id="pesquisa_rapida" name="quickSearch" style="position:relative; left:10px; top:15px;" placeholder="Pesquisa Rápida (ENTER)")
            h3 &nbsp;&nbsp;&nbsp;#[b Lista de Comentários do Post #{idP} do Processo #{idR}]        
        .w3-panel.w3-leftbar.w3-border-blue.w3-pale-blue
            h3 #[b Nº de Comentários:] #{p.length}
            //h1 Process List [Nº de Processos: #{plist.length}] #[a.w3-btn.w3-round.w3-grey(href="/processos/registo") New ] #[a.w3-btn.w3-round.w3-light-green(href="/nome") Ord por nome ] #[a.w3-btn.w3-round.w3-light-green(href="/lugar") Ord por lugar ] #[a.w3-btn.w3-round.w3-light-green(href="/data") Ord por data ] #[a.w3-btn.w3-round.w3-light-green(href="/retrieveAll") Normal ]
        form.w3-panel(method="POST" action="/posts/addComments/"+idR+"/"+idP)
            .w3-cell-row
                    .w3-cell(style="width:5%; position:relative; top:15px;")
                        i.fa.fa-solid.fa-user.fa-2xl(style="color: #000000;")
                    .w3-cell(style="width:95%; position:relative; top:-15px;")
                        fieldset.w3-panel.w3-round-xlarge.w3-border
                            legend #[b Adicionar Comentário]
                            label #[b > Autor]
                            input.w3-input.w3-round(type="text" name="Autor")
                            label #[b > Título/Assunto]
                            input.w3-input.w3-round(type="text" name="Assunto")
                            label #[b > Conteúdo/Descrição]
                            input.w3-input.w3-round(type="text" name="Description")
                            .w3-panel
                                button.w3-btn.w3-pale-green.w3-border.w3-border-black.w3-hover-green.w3-round.w3-round-xlarge.w3-small.w3-right(type="submit")
                                    .w3-cell-row
                                        .w3-cell
                                            i.fa.fa-solid.fa-circle-plus.fa-xl(style="color: #000000;")
                                        .w3-cell(style="width:84%")
                                            h4 &nbsp;&nbsp; #[b Adicionar Comentário] 
        each comment in p
            .w3-panel
                .w3-cell-row
                    .w3-cell(style="width:5%; position:relative; top:15px;")
                        i.fa.fa-solid.fa-user.fa-2xl(style="color: #000000;")
                        h6 #[b #{comment.Autor}]
                    .w3-cell(style="width:95%; position:relative; top:-15px;")
                        .w3-panel.w3-round-xlarge.w3-border
                            h4 #[b #{comment.Assunto}]
                            .w3-border-top
                                h5 #{comment.Description}
                a(href="/posts/deleteComment/"+idR+"/"+idP+"?Autor="+comment.Autor+"&Assunto="+comment.Assunto+"&Description="+comment.Description)
                    button.w3-btn.w3-pale-red.w3-border.w3-border-black.w3-hover-red.w3-round.w3-round-xlarge.w3-small.w3-right(style="position:relative; top:-15px;")
                        .w3-cell-row
                            .w3-cell
                                i.fa.fa-solid.fa-trash.fa-lg(style="color: #000000;")
                            .w3-cell(style="width:84%")
                                h6 &nbsp;&nbsp; #[b Apagar Comentário]
        .w3-panel
            a(href="/processos/"+idR+"/posts")
                button.w3-btn.w3-khaki.w3-border.w3-border-black.w3-hover-yellow.w3-round.w3-round-xlarge.w3-small(style="position:relative; left:20px;")
                    .w3-cell-row
                        .w3-cell
                            i.fa.fa-solid.fa-arrow-left.fa-2xl(style="color: #000000;")
                        .w3-cell(style="width:84%")
                            h5 &nbsp;&nbsp; #[b Voltar aos Posts]	   
  
        footer.w3-container.w3-blue-gray.w3-center
            h5 Gonçalo Braga, João Loureiro e Simão Barroso | Engenharia Web 2023 - Universidade do Minho
            h5 Generated for TP_EngWeb2023 in #{d}
        script.
            //pesquisa_rapida
            document.getElementById('pesquisa_rapida').addEventListener('keyup', function(event) {
                if (event.keyCode === 13) {
                    event.preventDefault();
                    var input = document.getElementById('pesquisa_rapida');
                    var p = input.value;
                    window.location.href = '/pesquisaRapida/' + p;
                }
            });
        